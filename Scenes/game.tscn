[gd_scene load_steps=20 format=3 uid="uid://b1mh36mwq3q24"]

[ext_resource type="Script" uid="uid://chiuaxdydautl" path="res://Scripts/Misc/Game.cs" id="1_rku1e"]
[ext_resource type="Texture2D" uid="uid://dkcv4h7u8elck" path="res://Sprites/Sea.png" id="2_7nbq1"]
[ext_resource type="PackedScene" uid="uid://chv60w7s0kt3y" path="res://Scenes/loading_screen.tscn" id="2_nb51f"]
[ext_resource type="Theme" uid="uid://bdgixxci07rw6" path="res://main_menu.theme" id="4_exi56"]
[ext_resource type="FontFile" uid="uid://d2h2sdgqnuwuy" path="res://Fonts/DungeonFont.ttf" id="4_nnt18"]
[ext_resource type="Script" uid="uid://lwipr6gngd83" path="res://Scripts/Managers/MapManager.cs" id="6_85qyi"]
[ext_resource type="Script" uid="uid://duwsoblnfw77g" path="res://Scripts/Managers/SimNodeManager.cs" id="6_nnt18"]
[ext_resource type="Script" uid="uid://c0oiega1yip5i" path="res://Scripts/Managers/TimeManager.cs" id="7_ewbju"]
[ext_resource type="Script" uid="uid://bsfhsvwfmgl58" path="res://Scripts/TerrainMap.cs" id="7_nnt18"]
[ext_resource type="Script" uid="uid://dwax1c6st6gtk" path="res://Scripts/DebugLabel.cs" id="9_iivbl"]
[ext_resource type="Script" uid="uid://vt1lv4bf6jeb" path="res://Scripts/UI/date_label.gd" id="10_7nbq1"]
[ext_resource type="Script" uid="uid://cn00mfk0hsqbx" path="res://Scripts/UI/tps_label.gd" id="11_exi56"]
[ext_resource type="Script" uid="uid://gfht7ss7kkek" path="res://Scripts/UI/PopulationLabel.cs" id="11_nnt18"]
[ext_resource type="Script" uid="uid://drq8bb8atmw4g" path="res://Scenes/FrameBreakdown.cs" id="12_ewbju"]
[ext_resource type="PackedScene" uid="uid://dj6rclmbb0jdm" path="res://Scenes/player_camera.tscn" id="13_rfjv2"]
[ext_resource type="Script" uid="uid://0g8tda0fqa40" path="res://Scripts/UI/ObjectInfo.cs" id="15_ewbju"]
[ext_resource type="Script" uid="uid://2sheynjgehe8" path="res://Scripts/UI/ActionPanel.cs" id="17_7nbq1"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7nbq1"]
size = Vector2(1280, 639)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_iivbl"]

[node name="Game" type="Node2D"]
script = ExtResource("1_rku1e")

[node name="Background" type="Node2D" parent="."]
z_index = -4096

[node name="Sea" type="Sprite2D" parent="Background"]
modulate = Color(0.0336749, 0, 0.328941, 1)
z_index = -4096
scale = Vector2(1.18519, 1.18333)
texture = ExtResource("2_7nbq1")
centered = false

[node name="Label" type="Label" parent="Background"]
offset_left = 376.0
offset_top = 649.0
offset_right = 900.0
offset_bottom = 735.0
theme = ExtResource("4_exi56")
theme_override_fonts/font = ExtResource("4_nnt18")
theme_override_font_sizes/font_size = 62
text = "Pixel History"
horizontal_alignment = 1

[node name="Time Manager" type="Node" parent="."]
script = ExtResource("7_ewbju")
gameSpeed = 0

[node name="Map Manager" type="Area2D" parent="."]
z_index = 2
script = ExtResource("6_85qyi")

[node name="Region Map" type="Sprite2D" parent="Map Manager"]
scale = Vector2(16, 16)
centered = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map Manager"]
position = Vector2(640, 319.5)
shape = SubResource("RectangleShape2D_7nbq1")

[node name="Simulation" type="Node" parent="."]
script = ExtResource("6_nnt18")

[node name="Terrain Map" type="Node2D" parent="."]
z_index = -10
z_as_relative = false
script = ExtResource("7_nnt18")
switchMap = true

[node name="Terrain Map" type="Sprite2D" parent="Terrain Map"]
scale = Vector2(16, 16)
centered = false

[node name="UI" type="CanvasLayer" parent="."]

[node name="WorldStats" type="VBoxContainer" parent="UI"]
offset_right = 40.0
offset_bottom = 40.0

[node name="Population Label" type="Label" parent="UI/WorldStats"]
layout_mode = 2
mouse_filter = 0
theme = ExtResource("4_exi56")
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 10
theme_override_font_sizes/font_size = 30
text = "World Population:"
script = ExtResource("11_nnt18")

[node name="VBoxContainer" type="VBoxContainer" parent="UI"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -107.0
offset_bottom = 67.0
grow_horizontal = 0
mouse_filter = 0

[node name="Date Label" type="Label" parent="UI/VBoxContainer" node_paths=PackedStringArray("timeManager")]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 10
theme_override_font_sizes/font_size = 30
text = "01/01/0000"
horizontal_alignment = 2
script = ExtResource("10_7nbq1")
timeManager = NodePath("../../../Time Manager")

[node name="TPS Label" type="Label" parent="UI/VBoxContainer" node_paths=PackedStringArray("timeManager")]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 10
theme_override_font_sizes/font_size = 30
text = "MTPS: 5
TPS: 30
Fps: 300"
horizontal_alignment = 2
script = ExtResource("11_exi56")
timeManager = NodePath("../../../Time Manager")
updateDelay = 0.25

[node name="Debug Info" type="VBoxContainer" parent="UI/VBoxContainer"]
layout_mode = 2

[node name="FrameBreakdown" type="Label" parent="UI/VBoxContainer/Debug Info"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 10
theme_override_font_sizes/font_size = 24
text = "Frame Breakdown:
Pops Time: 
Regions Time:
States Time: "
horizontal_alignment = 2
script = ExtResource("12_ewbju")

[node name="InfoHolder" type="Control" parent="UI" node_paths=PackedStringArray("nameLabel", "typeLabel", "populationLabel", "specialLabel")]
layout_mode = 3
anchors_preset = 0
offset_top = 494.0
offset_right = 264.0
offset_bottom = 640.0
script = ExtResource("15_ewbju")
nameLabel = NodePath("ObjectInfo/ScrollContainer/VBoxContainer/Name")
typeLabel = NodePath("ObjectInfo/ScrollContainer/VBoxContainer/Type")
populationLabel = NodePath("ObjectInfo/ScrollContainer/VBoxContainer/Population")
specialLabel = NodePath("ObjectInfo/ScrollContainer/VBoxContainer/Special")

[node name="ObjectInfo" type="Panel" parent="UI/InfoHolder"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -132.0
offset_top = -168.0
offset_right = 250.0
offset_bottom = 72.0
grow_horizontal = 2
grow_vertical = 2

[node name="ScrollContainer" type="ScrollContainer" parent="UI/InfoHolder/ObjectInfo"]
layout_mode = 0
offset_left = 5.0
offset_right = 382.0
offset_bottom = 239.0
mouse_filter = 0
mouse_force_pass_scroll_events = false

[node name="VBoxContainer" type="VBoxContainer" parent="UI/InfoHolder/ObjectInfo/ScrollContainer"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="Name" type="Label" parent="UI/InfoHolder/ObjectInfo/ScrollContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 40
text = "Nation Name"

[node name="Type" type="Label" parent="UI/InfoHolder/ObjectInfo/ScrollContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 22
text = "Nation"

[node name="HSeparator" type="HSeparator" parent="UI/InfoHolder/ObjectInfo/ScrollContainer/VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 2

[node name="Population" type="Label" parent="UI/InfoHolder/ObjectInfo/ScrollContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_constants/line_spacing = -4
theme_override_font_sizes/font_size = 30
text = "Population: 1,000
Free Land:
Farmers:
Merchants:
Aristocrats:
Artisans:"

[node name="Special" type="RichTextLabel" parent="UI/InfoHolder/ObjectInfo/ScrollContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/normal_font_size = 30
bbcode_enabled = true
text = "Arable Land:
Wealth:"
fit_content = true
scroll_active = false

[node name="Action Panel" type="Panel" parent="UI" node_paths=PackedStringArray("menuButton", "mainMenuButton", "saveMenuButton", "saveButton", "saveCancelButton", "overwriteButton", "menuPanel", "saveNamePanel", "saveNameEdit")]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -81.0
offset_right = 1280.0
grow_vertical = 0
mouse_force_pass_scroll_events = false
script = ExtResource("17_7nbq1")
menuButton = NodePath("HBoxContainer/MenuButton")
mainMenuButton = NodePath("../Options Panel/VBoxContainer/MainMenuButton")
saveMenuButton = NodePath("../Options Panel/VBoxContainer/SaveNameButton")
saveButton = NodePath("../SaveNamePanel/VBoxContainer/SaveOptions/SaveButton")
saveCancelButton = NodePath("../SaveNamePanel/VBoxContainer/SaveOptions/CancelButton")
overwriteButton = NodePath("../SaveNamePanel/VBoxContainer/OptionButton")
menuPanel = NodePath("../Options Panel")
saveNamePanel = NodePath("../SaveNamePanel")
saveNameEdit = NodePath("../SaveNamePanel/VBoxContainer/TextEdit")

[node name="HBoxContainer" type="HBoxContainer" parent="UI/Action Panel"]
layout_mode = 0
offset_left = 10.0
offset_right = 1280.0
offset_bottom = 82.0
theme_override_constants/separation = 20

[node name="TimeSpeedHolder" type="VBoxContainer" parent="UI/Action Panel/HBoxContainer"]
layout_mode = 2
alignment = 1

[node name="Label" type="Label" parent="UI/Action Panel/HBoxContainer/TimeSpeedHolder"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 30
text = "Game Speed:"

[node name="TimeSpeed" type="OptionButton" parent="UI/Action Panel/HBoxContainer/TimeSpeedHolder"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 30
selected = 6
item_count = 7
popup/item_0/text = "Paused"
popup/item_0/id = 0
popup/item_1/text = "1 Month Per Second"
popup/item_1/id = 1
popup/item_2/text = "6 Months Per Second"
popup/item_2/id = 2
popup/item_3/text = "1 Year Per Second"
popup/item_3/id = 3
popup/item_4/text = "5 Years Per Second"
popup/item_4/id = 4
popup/item_5/text = "10 Years Per Second"
popup/item_5/id = 5
popup/item_6/text = "Unlimited"
popup/item_6/id = 6

[node name="MapModeHolder" type="VBoxContainer" parent="UI/Action Panel/HBoxContainer"]
layout_mode = 2
alignment = 1

[node name="Label" type="Label" parent="UI/Action Panel/HBoxContainer/MapModeHolder"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 30
text = "Map Mode:"

[node name="MapMode" type="OptionButton" parent="UI/Action Panel/HBoxContainer/MapModeHolder"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 30
selected = 0
item_count = 7
popup/item_0/text = "Realm"
popup/item_0/id = 0
popup/item_1/text = "Polity"
popup/item_1/id = 1
popup/item_2/text = "Culture"
popup/item_2/id = 2
popup/item_3/text = "Population"
popup/item_3/id = 3
popup/item_4/text = "Tech"
popup/item_4/id = 4
popup/item_5/text = "Wealth"
popup/item_5/id = 5
popup/item_6/text = "Trade Weight"
popup/item_6/id = 6

[node name="ShowRegionsCheckbox" type="CheckBox" parent="UI/Action Panel/HBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 30
button_pressed = true
text = "Show Regions"

[node name="ShowOverlaysCheck" type="CheckBox" parent="UI/Action Panel/HBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 30
button_pressed = true
text = "Show Region
Overlays"
alignment = 1

[node name="VSeparator" type="VSeparator" parent="UI/Action Panel/HBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 370
theme_override_styles/separator = SubResource("StyleBoxEmpty_iivbl")

[node name="MenuButton" type="Button" parent="UI/Action Panel/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 40
text = "Main
Menu"

[node name="Debug Label" type="Label" parent="UI" node_paths=PackedStringArray("map")]
visible = false
offset_left = 109.0
offset_top = 66.0
offset_right = 200.0
offset_bottom = 97.0
theme = ExtResource("4_exi56")
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 7
theme_override_font_sizes/font_size = 13
text = "Region Data:
Population: 100"
script = ExtResource("9_iivbl")
map = NodePath("../../Map Manager")

[node name="SaveNamePanel" type="Panel" parent="UI"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -216.5
offset_top = -95.0
offset_right = 216.5
offset_bottom = 95.0
grow_horizontal = 2
grow_vertical = 2
mouse_force_pass_scroll_events = false

[node name="VBoxContainer" type="VBoxContainer" parent="UI/SaveNamePanel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -203.0
offset_top = -92.5
offset_right = 203.0
offset_bottom = 92.5
grow_horizontal = 2
grow_vertical = 2

[node name="Label" type="Label" parent="UI/SaveNamePanel/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_fonts/font = ExtResource("4_nnt18")
theme_override_font_sizes/font_size = 40
text = "Saving Simulation"
horizontal_alignment = 1
vertical_alignment = 1

[node name="OptionButton" type="OptionButton" parent="UI/SaveNamePanel/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 35

[node name="TextEdit" type="LineEdit" parent="UI/SaveNamePanel/VBoxContainer"]
visible = false
custom_minimum_size = Vector2(0, 35)
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 35
placeholder_text = "Save Name
"
max_length = 20
context_menu_enabled = false
emoji_menu_enabled = false

[node name="SaveOptions" type="HBoxContainer" parent="UI/SaveNamePanel/VBoxContainer"]
layout_mode = 2
alignment = 1

[node name="SaveButton" type="Button" parent="UI/SaveNamePanel/VBoxContainer/SaveOptions"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 35
text = "Save"

[node name="CancelButton" type="Button" parent="UI/SaveNamePanel/VBoxContainer/SaveOptions"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 35
text = "Cancel"

[node name="Options Panel" type="Panel" parent="UI"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 358.0
offset_top = 79.0
offset_right = 640.0
offset_bottom = 279.0
grow_horizontal = 2
grow_vertical = 2
mouse_force_pass_scroll_events = false

[node name="VBoxContainer" type="VBoxContainer" parent="UI/Options Panel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -111.0
offset_top = -84.0
offset_right = 112.0
offset_bottom = 99.0
grow_horizontal = 2
grow_vertical = 2

[node name="Label" type="Label" parent="UI/Options Panel/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_fonts/font = ExtResource("4_nnt18")
theme_override_font_sizes/font_size = 40
text = "Options"
horizontal_alignment = 1
vertical_alignment = 1

[node name="HSeparator" type="HSeparator" parent="UI/Options Panel/VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 17

[node name="MainMenuButton" type="Button" parent="UI/Options Panel/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 32
text = "Main Menu"

[node name="OptionsButton" type="Button" parent="UI/Options Panel/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 32
disabled = true
text = "Options
"

[node name="SaveNameButton" type="Button" parent="UI/Options Panel/VBoxContainer"]
layout_mode = 2
theme = ExtResource("4_exi56")
theme_override_font_sizes/font_size = 32
text = "Save Simulation"

[node name="Loading" type="CanvasLayer" parent="."]

[node name="Loading Screen" parent="Loading" instance=ExtResource("2_nb51f")]
visible = false
z_index = 100

[node name="PlayerCamera" parent="." instance=ExtResource("13_rfjv2")]
position = Vector2(640, 360)
limit_left = 0
limit_top = 0
limit_right = 1280
limit_bottom = 720
position_smoothing_enabled = true
zoomSpeed = 5.0
minZoom = 25.0
